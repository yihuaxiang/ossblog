---
meta:
  - name: description
    content: centos set swap äº¤æ¢åŒº
  - name: keywords
    content: centos set swap äº¤æ¢åŒº
tags: ["centos", "swap", "äº¤æ¢åŒº", "linux", "æ€§èƒ½"]
---
# centosè®¾ç½®ç¼“å­˜åŒº

### èµ·æº

æ›¾ç»ï¼Œä½“éªŒè¿‡æ‰‹æœºé€šè¿‡`ssh`ç™»å½•æœåŠ¡å™¨ï¼Œä½¿ç”¨`vim`è¿›è¡Œå¼€å‘ï¼Œå¦‚æœæ˜¯å‰ç«¯çš„ä¸œè¥¿æˆ–å†™åšå®¢è¿˜å¥½ï¼ˆ[æ‰‹æœº-ssh-vim](https://z.wiki/misc/phone-blog.html)ï¼‰ï¼Œä½†å¦‚æœæ˜¯`Java`å¼€å‘çš„è¯`vim`è¿˜çœŸæœ‰ç‚¹åƒåŠ›ã€‚

ä»Šå¤©ï¼Œæˆ‘çªå‘å¥‡æƒ³ï¼Œç»™æœåŠ¡å™¨è£…äº†`gnome`æ¡Œé¢ï¼Œé€šè¿‡`vnc`é“¾æ¥ä¸Šå»ã€‚å®‰è£…`idea`ä¹Ÿèƒ½é¡ºåˆ©æ‰“å¼€ã€‚

> [How To Install and Configure VNC Remote Access for the GNOME Desktop on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-remote-access-for-the-gnome-desktop-on-centos-7)

äº‹æƒ…è®²åˆ°è¿™å„¿ï¼Œå½¢å¼ä¼¼ä¹ä¸€ç¯‡å¤§å¥½ï¼Œä¼¼ä¹å¦‚åŒç°å§‘å¨˜å’Œç‹å­è¿‡ä¸Šäº†å¹¸ç¦çš„ç”Ÿæ´»ï¼Œä½†ç°å®ä¸æ˜¯ç«¥è¯

å½“æˆ‘ä¸€æ—¦ç”¨`idea`å¾—å¼€æŸä¸ªé¡¹ç›®çš„æ—¶å€™æ•´ä¸ªç³»ç»Ÿä¼šè¿›å»å‡æ­»çŠ¶æ€ğŸ˜³

![gnome](https://z.wiki/autoupload/20221129/pQy8.1792X2176-image.png)

![idea](https://z.wiki/autoupload/20221129/duWx.1792X2176-image.png)

ä¸€æ—¦è¿›å»å‡æ­»çŠ¶æ€ï¼Œæ•´ä¸ªæœåŠ¡å™¨ä¾¿æ— ä»»ä½•ååº”ï¼ˆ`ssh`æ— æ³•ç™»é™†ã€`telnet`æ— æ³•è¿æ¥ã€`uptime`ç›‘æ§æŠ¥`502`ï¼‰

![ç³»ç»Ÿå‡æ­»](https://z.wiki/autoupload/20221129/fHkd.1060X1898-image.png)

![ç›‘æ§ 502](https://z.wiki/autoupload/20221129/TeGc.1326X1338-image.png)

ç”±äºè…¾è®¯äº‘æ— æ³•æ”¶é›†åˆ°å‡æ­»æœŸé—´çš„ä»»ä½•æ—¥å¿—ã€ç›‘æ§ï¼Œæƒ³å€ŸåŠ©ç›‘æ§æ¥æ’æŸ¥çš„æ–¹æ¡ˆçœ‹æ¥æ˜¯èµ°ä¸é€šäº†ğŸ˜Œ

### æ’æŸ¥

æ’æŸ¥æ€è·¯æœ‰ä¸¤ä¸ªæ–¹å‘ï¼š

1. `CPU`èµ„æºä¸è¶³
2. å†…å­˜ä¸è¶³

æœºå™¨é…ç½®æ˜¯`4C4G`ï¼Œé…ç½®ä¹Ÿè¿˜è¡Œï¼Œè¿™é…ç½®åŸä»·è´­ä¹°çš„è¯ä¸€å¹´å¾—ä¸€åƒå¤šï¼Œä½œä¸ºä¸ªäººåšå®¢ä½¿ç”¨ç»°ç»°æœ‰ä½™ã€‚

é€šè¿‡`brew`å®‰è£…`htop`çœ‹çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µï¼š

```shell
brew install htop
```

![htop æŸ¥çœ‹ç›‘æ§](https://z.wiki/autoupload/20221129/vu7o.1990X2484-image.png)

èµ«ç„¶å‘ç°ï¼Œ`swap` 0ï¸âƒ£ğŸ˜²ï¼Œ`4G`å†…å­˜æœ¬èº«å¹¶ä¸å°‘ï¼Œä½†æ˜¯è¿è¡Œ`idea`è¿™æ ·é‡é‡çº§çš„è½¯ä»¶è¿˜æ˜¯æœ‰ç‚¹æ‰è¥Ÿè§è‚˜ï¼ŒåŒæ—¶æ²¡æœ‰è®¾ç½®ä»»ä½•äº¤æ¢åŒº
å¯¼è‡´è¿è¡Œæ—¢å¡æ­»ã€‚

### è®¾ç½®äº¤æ¢åŒº

ç³»ç»Ÿåœ¨ç‰©ç†å†…å­˜ä¸å¤Ÿæ—¶å¯ä»¥é€šè¿‡è®¾ç½®äº¤æ¢åŒºå°†å†…å­˜ä¸­éƒ¨åˆ†èµ„æºæ”¾ç½®åˆ°äº¤æ¢åŒºä¸­ï¼Œä»è€Œçªç ´ç‰©ç†ä¸Šçš„å†…å­˜é™åˆ¶ã€‚

äº¤äº’åŒºå¯¹`linux`ç³»ç»Ÿçš„æ€§èƒ½è‡³å…³é‡è¦ã€‚

#### æŸ¥çœ‹äº¤æ¢åŒºè®¾ç½®

é¦–å…ˆç¡®å®šä¸‹ï¼Œè®¾ç½®äº¤æ¢åŒºå¿…é¡»æ˜¯`root`è´¦å·æˆ–æœ‰`sudo`æƒé™çš„è´¦å·ã€‚

```shell
sudo swapon --show
```

é€šè¿‡`swapon`å¯ä»¥æŸ¥çœ‹å·²è®¾ç½®çš„äº¤æ¢åŒº

![æŸ¥çœ‹äº¤æ¢åŒº](https://z.wiki/autoupload/20221129/Gmv4.630X1280-image.png)


å¦‚ä¸Šå›¾ï¼Œæˆ‘å·²ç»ç»™æœåŠ¡å™¨è®¾ç½®äº†ä¸‰å—äº¤äº’åŒºï¼Œå…±è®¡`6.5G`ç©ºé—´

#### åˆ›å»º`swap`æ–‡ä»¶

```shell
sudo dd if=/dev/zero of=/swapfile bs=1024 count=1024k
```

é€šè¿‡`dd`å‘½ä»¤åˆ›å»ºä¸€ä¸ªå¤§å°`1G`çš„äº¤æ¢åŒºæ–‡ä»¶

#### è®¾ç½®æƒé™

```shell
sudo chmod 600 /swapfile
```

é€šè¿‡ä¿®æ”¹æƒé™ï¼Œä½¿å¾—è¯¥æ–‡ä»¶ä»…`root`è´¦å·å¯è¯»å†™

#### æ¿€æ´»äº¤æ¢åŒº

```shell
sudo swapon /swapfile
```

æ­¤æ—¶ï¼Œäº¤æ¢åŒºæ–‡ä»¶å·²æ¿€æ´»ï¼Œç¨‹åºå¯ç”¨çš„å†…å­˜å·²ç»ä¸å†å—é™äºç‰©ç†å†…å­˜

é€šè¿‡`swapon`å¯ä»¥æŸ¥çœ‹å½“å‰å·²è®¾ç½®çš„äº¤æ¢åŒº

```shell
sudo swapon --show
```

#### æŒä¹…åŒ–äº¤æ¢åŒº

ä»¥ä¸Šäº¤æ¢åŒºå·²è®¾ç½®å¥½ï¼Œä½†ä¸€æ—¦ç³»ç»Ÿé‡å¯äº¤æ¢åŒºé…ç½®ä¼šä¸¢å¤±ï¼Œä¸ºæ­¤å¯ä»¥é€šè¿‡ä¸€ä¸‹å‘½ä»¤æŒä¹…åŒ–äº¤æ¢åŒºé…ç½®ã€‚

```shell
sudo echo "/swapfile swap swap defaults 0 0" >> /etc/fstab
```

æ”¯æŒï¼Œäº¤æ¢åŒºå·²è®¾ç½®å¥½

è‡³æ­¤ï¼Œä½¿ç”¨`idea`æ‰“å¼€ä»»ä½•é¡¹ç›®éƒ½æ²¡é—®é¢˜å•¦~

![è¿è¡Œ idea](https://z.wiki/autoupload/20221129/hlwX.1792X2176-image.png)

åŒæ—¶ï¼Œç”±äºäº¤æ¢åŒºçš„å­˜åœ¨ï¼Œç³»ç»Ÿå¹³å‡å†…å­˜ä½¿ç”¨é‡ä¹Ÿæœ‰å¤§å¹…åº¦çš„ä¸‹é™ã€‚

![å†…å­˜ç›‘æ§ å¤§å¹…ä¸‹é™](https://z.wiki/autoupload/20221129/vlDo.1076X2134-image.png)

### äº¤æ¢åŒºå¤§å°

é‚£å…·ä½“åˆ°æ¯ä¸ªäººï¼Œäº¤æ¢åŒºåº”è¯¥è®¾ç½®å¤šå¤§æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿ

äº¤æ¢åŒºå¤§å°æ²¡æœ‰ç»å¯¹æ­£ç¡®çš„è®¾ç½®ï¼Œ
ä¸è¿‡æ ¹æ®[çº¢å¸½](https://www.redhat.com/en/blog/do-we-really-need-swap-modern-systems)å»ºè®®ï¼šç³»ç»Ÿå†…å­˜çš„`20%`å¤§å°ã€‚
[centos](https://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-swapspace.html)åˆ™å»ºè®®ï¼šå†…å­˜å°äº`2G`åˆ™äº¤æ¢åŒºè®¾ç½®ä¸ºå†…å­˜çš„ä¸¤å€ï¼Œ
å†…å­˜å¤§äº`2G`åˆ™äº¤æ¢åŒºä¸ºå†…å­˜+`2G`

### å…¶ä»–

åˆ é™¤äº¤æ¢åŒº

```shell
sudo swapoff -v /swapfile
sudo rm /swapfile
```


`gnome`ï¼š [gnome.org](https://www.gnome.org/)
